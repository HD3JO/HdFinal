<!DOCTYPE HTML>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.w3.org/1999/xhtml"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<title>한섬 커뮤니티 Sommunity</title>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no" />
<meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
<meta id="_csrf_header" name="_csrf_header"
	th:content="${_csrf.headerName}" />
<link rel="shortcut icon"
	href="http://cdn.thehandsome.com/_ui/desktop/common/images/common/thehandsome_ic_16x16.ico" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/font_80.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/common.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/layout.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/popup.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/jquery-ui.min.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/brand.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/swiper.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/main_201903.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/footer.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/products.css" media="all" />
<link rel="stylesheet" type="text/css"
	href="/_ui/desktop/common/css/contents.css" media="all" />
<style type="text/css" media="print">
@IMPORT url("/_ui/desktop/common/blueprint/print.css");
</style>

<script type="text/javascript"
	src="/_ui/desktop/common/js/jquery-1.11.2.min.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/jquery.vticker.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/handsome/common.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/handsome/html5shiv-printshiv.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/handsome/jquery.flexslider.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/handsome/ui.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/jquery.form-3.51.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/common_function.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/videojs-ie8.min.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/jquery-ui-1.11.2.min.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/instagramAPI.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/instagramAPI.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/handsome/jquery.bxslider.min.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/makePCookie.js"></script>
<script type="text/javascript" src="/_ui/shared/js/siteoverlay.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/wisenut/js/jquery.min.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/swiper.min.js"></script>
<script type="text/javascript" src="/_ui/desktop/common/js/netfunnel.js"
	charset="UTF-8"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/netfunnel_skin.js" charset="UTF-8"></script>
<script type="text/javascript" src="/_ui/desktop/common/js/unorm.js"></script>
<script type="text/javascript"
	src="/_ui/desktop/common/js/appboy.min.js"></script>
<script type="text/javascript" src="/smarteditor/js/HuskyEZCreator.js" charset="utf-8"></script>
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="/sommunity/assets/css/_style_webzine.css" />
<link rel="stylesheet" href="/sommunity/assets/css/_style_webzine2.css" />
<link rel="stylesheet" href="/sommunity/assets/css/_style_gallery.css" />
<link rel="stylesheet" href="/sommunity/assets/css/board.css" />
<link rel="stylesheet" href="/sommunity/assets/css/_style_list.css" />
<link rel="stylesheet" href="/sommunity/assets/css/css3.css" />
<link rel="stylesheet" href="/sommunity/assets/css/dark.css" />
<link rel="stylesheet" href="/sommunity/assets/css/view_document.css" />
<link rel="stylesheet"
	href="/sommunity/assets/css/fontawesome-all.min.css" />
<link rel="stylesheet" href="/sommunity/assets/css/main.css" />
<link rel="stylesheet" href="/sommunity/assets/css/button.css" />
<link rel="stylesheet" href="/sommunity/assets/css/responsive-grid.css" />
<link rel="stylesheet" href="/sommunity/assets/css/themify-icons.css" />
<link rel="stylesheet" href="/sommunity/assets/css/view_document.css" />
<link rel="stylesheet" href="/sommunity/assets/css/write_form.css" />
<link rel="stylesheet" href="/sommunity/assets/css/editor.css" />
<noscript>
	<link rel="stylesheet" href="/sommunity/assets/css/noscript.css" />
</noscript>
</head>
<body class="is-preload">
	<!-- Wrapper -->
	<div id="wrapper">
		<!-- Header -->
		<header id="header">
			<div class="inner">
				<!-- Logo -->
				<h2 style="margin: 0 0 0 0;">
					<span style="display: block;">한섬닷컴 회원을 위한</span><span
						style="display: block;">패션 커뮤니티</span>
				</h2>
				<a href="/sommunity/home" class="logo"> <span class="symbol"><img
						src="images/sommunity.png" style="margin: 0 auto;" alt="" /></span><span
					class="title"></span>
				</a>
				<!-- Nav -->
				<nav>
					<ul>
						<li><a href="#menu">Menu</a></li>
					</ul>
				</nav>

			</div>
		</header>

		<!-- Menu -->
		<nav id="menu">
			<h2>Menu</h2>
			<h2 sec:authorize="isAuthenticated()" style="letter-spacing: 0.1em;">안녕하세요! <span sec:authentication="principal.name"></span>님</h2>
			<h4 sec:authorize="isAuthenticated()" style="letter-spacing: 0.1em;"><span sec:authentication="principal.email"></h4>
			<ul>
				<li><a href="/sommunity/home">Home</a></li>
				<li><a href="/main">한섬닷컴 이동</a></li>
				<li sec:authorize="!isAuthenticated()"><a href="/customLogin">로그인</a></li>
				<li sec:authorize="!isAuthenticated()"><a href="/customLogin">회원가입</a></li>
				<li sec:authorize="isAuthenticated()">
					<form action="/logout" method="POST" id="logoutForm">
						<!--<input type="hidden" th:name="${_csrf.token}" th:value="${_csrf.headerName}"> -->
						<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
					</form><a href="javascript:void(0);" onclick="logout()">로그아웃 <!-- 로그아웃 --></a></li>
				<li sec:authorize="isAuthenticated()"><a href="elements.html">마이페이지</a></li>
			</ul>
			<script>
			function logout(){
				$('#logoutForm').submit();
			}
			</script>
		</nav>

        <!-- Main -->
        <div id="main">
        <script th:inline="javascript">
			/*<![CDATA[*/
			const count = [[${count}]];
			const pageNum = [[${pageNum}]];
			const bname = [[${bname}]];
			/*]]>*/
			/*게시글 개수와 페이지 넘버*/
		</script>
            <div class="inner">
            	<!--
                <h1 th:text="${#strings.toUpperCase(bname)}"></h1>
                -->
                <span class="image main"><img th:src="'images/'+${bname}+'_long.jpg'" alt="" /></span>
            </div>
            <div class="inner">
	                <script>
	                    var default_style = 'list';
	                    var doc_img = 'Y';
	                </script>
	
	                <div id="xet-boardWrp" class="light">
	
	                    <div class="xet-boardHeader">
	                        <div class="mg-b30 text-center">
	                            <h1 th:text="${#strings.toUpperCase(bname)} + ' 게시판'"></h1>
	                        </div>
	                    </div>
	                    <div id="ajax-boardContent">
	                        <div class="xet-listWrp">
	                            <div class="xet-listTableWrp">
	                                <table cellspacing="0" border="0" cellpadding="0" summary="List of Articles"
	                                    class="xet-listTable">
	                                    <thead>
	                                        <tr>
	                                            <th width="15%" scope="col"></th>
	                                            <th width="200px" scope="col">제목</th>
	                                            <th width="20%" scope="col">작성자</th>
	                                            <th width="10%" scope="col">날짜</th>
	                                            <th width="5%" scope="col">조회수</th>
	                                            <th width="5%" scope="col">좋아요</th>
	                                        </tr>
	                                    </thead>
	                                    <tbody id="boarditems">
	                                    </tbody>
	                                </table>
	                            </div>
	                        </div>
							<!-- 페이징 -->
	                        <ul class="boardPagination" id="boardPagination">		
									
							</ul>
							<script>
								let endPage = Math.ceil(count/10);
								let pageStr = "";
								let quotient = parseInt((pageNum-1)/10); /* 10 -> 0, 11 -> 1 */
								console.log('첫 페이지 : ' + quotient*10+1 + '마지막 페이지')
								let end;
								
								if(pageNum !== 1) {
									pageStr += `<li class="prevEnd"> <a href="/sommunity/board?bname=`+bname+`&pageNum=1" title="첫 페이지">FIRST</a> </li>`;
									pageStr += `<li> <a href="/sommunity/board?bname=`+bname+`&pageNum=` + (pageNum-1) + `" title="이전 페이지"> < </a> </li>`;
								} 
								
								
								if(quotient*10+10 <= endPage) end = quotient*10+10;
								else end = endPage;
								for(let i = quotient*10+1 ; i <= end ; i ++) {
									if(pageNum === i) pageStr += `<li> <strong class="page_on">`+i+`</strong></li>`
									else pageStr += `<li><a href="/sommunity/board?bname=`+bname+`&pageNum=`+ i +`">`+ i +`</a></li>`;
								}
								if(pageNum !== endPage && count !== 0) {
									pageStr += `<li> <a href="/sommunity/board?bname=`+bname+`&pageNum=` + (pageNum+1) + `" title="다음 페이지"> > </a> </li>`;
									pageStr += `<li class="nextEnd"><a href="/sommunity/board?bname=`+bname+`&pageNum=` + endPage + `" title="끝 페이지">LAST</a></li>`;
								} 
									
									
								
								document.getElementById("boardPagination").innerHTML = pageStr;
							</script>
							
	                    </div>
						<div class="xet-clearfix boardHeaderCateWrp">
	                        <div class="float-right">
	                            <button id ="Wbutton" class="xet_btn submit xet_btn_block" th:attr="onclick=|goWriteForm('${bname}')|"><strong>쓰기</strong></button>
	                        </div>
	                    </div>
						<script type="text/javascript">
						var header = $("meta[name='_csrf_header']").attr('content');
					    var token = $("meta[name='_csrf']").attr('content');
					    
					    function goViewForm(bid) {
							if($('#user').val() === 'anonymousUser') {
								let lc = new layerConfirm('로그인 후 이용 가능합니다.', '로그인', '취소')
								lc.confirmAction = function () {
									location.href = "/customLogin"
                                }
								return;
							}
							
							location.href = '/sommunity/view?bno='+bid;
						}	
					    
						function goWriteForm(bname) {
							if($('#user').val() === 'anonymousUser') {
								let lc = new layerConfirm('로그인 후 이용 가능합니다.', '로그인', '취소')
								lc.confirmAction = function () {
									location.href = "/customLogin"
                                }
								return;
							}
							
							location.href = '/sommunity/write?bname='+bname;
						}
						</script>
	                    <div class="boardSearch">
	                        <form action="https://demo.xetemplate.com/" method="get"
	                            onsubmit="return procFilter(this, search)" id="fo_search" class="boardSearchForm"><input
	                                type="hidden" name="act" value="">
	                            <input type="hidden" name="user" id="user" th:value="${#authentication.name}" >
	                            <input type="hidden" name="vid" value="">
	                            <input type="hidden" name="mid" value="simple_board_test">
	                            <input type="hidden" name="category" value="">
	                            <input type="hidden" id="bname" name="bname" th:value="${bname}">
	                            <input type="hidden" id="deliveryOkMsg" value="확인">
	                            <div class="boardSearchWrp">
	                                <span class="search-target">
	                                    <select name="search_target">
	                                        <option value="title_content">제목+내용</option>
	                                        <option value="title">제목</option>
	                                        <option value="content">내용</option>
	                                        <option value="comment">댓글</option>
	                                        <option value="nick_name">닉네임</option>
	                                        <option value="user_id">아이디</option>
	                                        <option value="tag">태그</option>
	                                    </select>
	                                </span>
	                                <input type="text" name="search_keyword" value="" title="검색" class="inputText"
	                                    accesskey="S" placeholder="">
	                                <span class="search-btn">
	                                    <button type="submit"
	                                        onclick="jQuery(this).parents('form#fo_search').submit();return false;"
	                                        alt="검색"></button> </span>
	                            </div>
	                        </form>
	                    </div> <!-- // 하단 내용 // -->
	                </div><!-- board End -->
	                <!-- // 게시판 끝 // -->
	            </div>
			</div>
        </div>
        <script type="text/javascript">
			$(document).ready( function() {
				
				var header = $("meta[name='_csrf_header']").attr('content');
			    var token = $("meta[name='_csrf']").attr('content');
			    
				let brand = $('#bname').val();
				console.log(brand);
				let object = {
					"brand" : brand
		 		}
				const tbody = document.getElementById("boarditems");
				let jsondata = JSON.stringify(object);
				let htmlstr = "<tr class='notice-item' style='background-color: rgba(144, 144, 144, 0.075);'> <td> <span class='notice-text'>공지</span> </td> <td class='td-subject' colspan='6'> <p class='subject'>욕설과 비방글을 무통보 삭제합니다.</p> </td> </tr>";
				/*
				$.ajax({
		            url: '/getBoard',
		            data: jsondata,
		            type: 'POST',
		            dataType: 'JSON',
		            contentType: 'application/json',
		            beforeSend: function (xhr) {
		                xhr.setRequestHeader(header, token);
		            },
		            success: function (data) {
		                console.log(data);
		                let now = new Date();
		                
		                let nowYear = now.getFullYear();
		                let nowMonth = ('00' + (now.getMonth() + 1)).slice(-2);
		                let nowDate = ('00' + now.getDate()).slice(-2);
		                if(data.length > 0) {
		                	$(data).each(function (index) {
		                		htmlstr += "<tr class='bg1'>";
		                		htmlstr += "<td> <span alt='번호'>" + this.bid + "</span> </td>";
		                		htmlstr += "<td class='td-subject'> <a href='/sommunity/view?bno="+this.bid + "' class='subject'>" + this.btitle + "</a> </td>";
		                		htmlstr += "<td><a href='' class='member_0' onclick='return false' alt='작성자'>" + this.bauthor + "</a></td>"
		                		let bdate = this.bdate;
		                		
		                		if(nowMonth === bdate.substr(5,2) && nowDate === bdate.substr(8,2)) {
		                			htmlstr += "<td>"+bdate.substr(11,2)+":"+bdate.substr(14,2)+"</td>";
		                		}
		                		else {
		                			htmlstr += "<td>"+bdate.substr(5,2) +"/" + bdate.substr(8,2) +"</td>";
		                		}
		                		
		                		htmlstr += "<td>조회수</td>";
		                		//htmlstr += "<td> <a href='' class='thumbnail' style='width: 80px'> <em>123</em> <img src='https://post-phinf.pstatic.net/MjAxOTExMDRfOCAg/MDAxNTcyODU1MDQ5NDA4.FCA8G3r-rbxsidLKqxBX6yfk4DuUc1zLXhdCni9BVB0g.fjQTknYM-SXz03aSAQIopvVKV515Qx1LYBn370JkRV0g.JPEG/%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C_%281%29.jpg?type=w1200' alt=''> </a></td>"
		                		
		                	}
		                	);
		                }
		            },
		            error: function () {
		                console.log("게시판 로드 실패");
		            },
		            complete : function() {        
		            	tbody.innerHTML = htmlstr;
		            }
		          
		        });
				*/
				
				/* 페이지에 맞는 게시글 불러오기 */
				$.ajax({
		            url: '/getPageBoard',
		            data: JSON.stringify({
		    			"pageNum" : pageNum,
		    			"brand" : bname
		    		}),
		            type: 'POST',
		            dataType: 'JSON',
		            contentType: 'application/json',
		            beforeSend: function (xhr) {
		                xhr.setRequestHeader(header, token);
		            },
		            success: function (data) {
		            	console.log(data);
		                let now = new Date();
		                
		                let nowYear = now.getFullYear();
		                let nowMonth = ('00' + (now.getMonth() + 1)).slice(-2);
		                let nowDate = ('00' + now.getDate()).slice(-2);
		                if(data.length > 0) {
		                	$(data).each(function (index) {
		                		htmlstr += "<tr class='bg1'>";
		                		htmlstr += "<td width='15%'> <span alt='머리글'>" + this.bheader + "</span> </td>";
		                		htmlstr += "<td class='etc' style='text-align : left;'> <a href='javascript:void(0);' onclick='goViewForm("+this.bid+")' class='subject'><strong>" + this.btitle + "</strong></a> </td>";
		                		htmlstr += "<td width='20%' style='text-align : left; text-overflow: ellipsis;'><a href='' class='member_0' onclick='return false' alt='작성자'>" + this.bauthor + "</a></td>"
		                		let bdate = this.bdate;
		                		
		                		if(nowMonth === bdate.substr(5,2) && nowDate === bdate.substr(8,2)) {
		                			htmlstr += "<td width='10%'>"+bdate.substr(11,2)+":"+bdate.substr(14,2)+"</td>";
		                		}
		                		else {
		                			htmlstr += "<td width='10%'>"+bdate.substr(5,2) +"/" + bdate.substr(8,2) +"</td>";
		                		}
		                		
		                		htmlstr += "<td width='5%'>" +this.bhits+"</td>";
		                		htmlstr += "<td width='5%'> " +this.blikes +"</td>";
		                		
		                	}
		                	);
		                }
		            },
		            error: function () {
		                console.log('안됨')
		            },
		            complete : function() {        
		            	tbody.innerHTML = htmlstr;
		            }
		          
		        });
				
				
			});	
			
			</script>
    </div>
	
		<!-- Footer -->
		<footer id="footer">
			<div class="inner" style="padding: 0 2.5em;">
				<section>
					<h2>Follow</h2>
					<ul class="icons">
						<li><a href="https://www.facebook.com/thehandsome.official/"
							class="icon brands style2 fa-facebook-f"><span class="label">Facebook</span></a></li>
						<li><a href="https://www.instagram.com/thehandsome_official/"
							class="icon brands style2 fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon solid style2 fa-phone"><span
								class="label">Phone</span></a></li>
						<li><a href="#" class="icon solid style2 fa-envelope"><span
								class="label">Email</span></a></li>
					</ul>
				</section>
				<ul class="copyright">
					<li>&copy;  Fourth st. MEN  All rights reserved</li>
				</ul>
			</div>
		</footer>

	</div>
	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="assets/js/board.js"></script>
	<script src="assets/js/jquery.plugins.min.js"></script>

</body>

</html>